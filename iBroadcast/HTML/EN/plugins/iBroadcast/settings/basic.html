
<style>
  .brand-light, .brand-dark {
    display: none;    
  }
  
</style>
[% PROCESS settings/header.html %]	
	[% IF isSignedIn %]
	<strong>[% "PLUGIN_IBROADCAST_CURRENTLY_SIGNED_IN_MESSAGE" | string %] :</strong>
	<br/>
	<input name="signout" type="submit" value="Sign Out" class="stdclick" />
	<br/>	
	[% END %]
	[% IF isSignedOut %]
		<script type="text/javascript"> 
			function bschangeText(submitId){
				var submit = document.getElementById(submitId);
				submit.value = 'Please wait...';
				return true;
			};		
		</script>				
		[% "PLUGIN_IBROADCAST_SIGN_IN_PROMPT" | string %]:<br/>
			[% WRAPPER setting title="PLUGIN_IBROADCAST_USERNAME" desc="" %]
			<div class="prefDesc">
				<input type="text" class="stdedit" name="pref_username" value="[% prefs.username %]" size="40" />	
			</div>
			[% END %]
		
			[% WRAPPER setting title="PLUGIN_IBROADCAST_PASSWORD" desc="" %]
			<div class="prefDesc">
				<input type="text" class="stdedit" name="pref_password" value="[% prefs.password %]" size="40" />	
			</div>
			[% IF useExtJS || useAJAX %]
				<input name="signin" type="submit" value="Sign In" class="stdclick" id="btnsignin" onclick="return bschangeText('btnsignin');" />
			[% ELSE %]
				<input name="signin" type="submit" value="Sign In" class="stdclick" />
			[% END %]		
		[% END %]			
		<br/>	
	[% END %]
 	<hr/>	

  	[% WRAPPER setting title="PLUGIN_IBROADCAST_STREAMING_BITRATE" desc="PLUGIN_IBROADCAST_BITRATE_MESSAGE" %]
	<select class="stdedit" name="pref_bitrate" id="pref_bitrate">			
				<option [% IF prefs.pref_bitrate == '96' %]selected [% END %]value="96">96 kbps</option>
				<option [% IF prefs.pref_bitrate == '128' %]selected [% END %]value="128">128 kbps</option>
				<option [% IF prefs.pref_bitrate == '256' %]selected [% END %]value="256">256 kbps</option>
				<option [% IF prefs.pref_bitrate == '320' %]selected [% END %]value="320">320 kbps</option>			
				<option [% IF prefs.pref_bitrate == 'orig' %]selected [% END %]value="orig">[% "PLUGIN_IBROADCAST_ORIGINAL_QUALITY" | string %]</option>			
	</select>
	[% END %]

<!-- Branding images -->
<img src="[% webroot %]plugins/iBroadcast/html/images/ibroadcast-light-compact-powered.png" class="brand-light" alt="Light logo">
<img src="[% webroot %]plugins/iBroadcast/html/images/ibroadcast-dark-compact-powered.png" class="brand-dark" alt="Dark logo">

  <script>
  window.addEventListener('load', () => {
    const light = document.querySelector('.brand-light');
    const dark  = document.querySelector('.brand-dark');

    try {
      const parentDoc = window.parent.document;
      // âœ… Simply check if *any* element in the parent has theme--dark
      const isDark = parentDoc.querySelector('[class*="theme--dark"]') !== null;

      console.log("Detected dark mode:", isDark);

      light.style.display = isDark ? 'none' : 'block';
      dark.style.display  = isDark ? 'block' : 'none';
    } catch (e) {
      console.warn('Could not access parent. Defaulting to light.');
      light.style.display = 'block';
    }
  });
  </script> 

[% PROCESS settings/footer.html %]